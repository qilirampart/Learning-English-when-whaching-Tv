# 🎵 单词发音功能使用说明

## 功能概述

已成功为美剧单词学习助手添加了**单词发音功能**，使用浏览器内置的 Web Speech API 实现，完全免费、无需后端 API。

---

## ✨ 功能特性

### 1. **三种页面集成**
- ✅ **快速查询页** (QueryView)：查询结果卡片中的发音按钮
- ✅ **单词库页** (WordsView)：单词卡片和详情对话框中的发音按钮
- ✅ **学习计划页** (LearningView)：复习卡片和待复习列表中的发音按钮

### 2. **智能发音设置**
- 🎚️ **播放速度**：慢速、正常、快速三档可选
- 🌍 **口音选择**：美式英语、英式英语、澳式英语
- 💾 **设置持久化**：配置自动保存到 localStorage

### 3. **用户体验优化**
- ⌨️ **快捷键支持**：查询页支持空格键快速播放
- 🎨 **视觉反馈**：播放时按钮状态变化和动画效果
- 🔇 **浏览器支持检测**：自动检测并提示不支持的浏览器

---

## 📍 使用位置

### 1️⃣ 快速查询页 (`/query`)

**查询结果卡片**：
- 单词标题右侧有**播放按钮**（麦克风图标）
- 点击播放发音
- 支持空格键快捷播放（输入框外）

**发音设置菜单**：
- 单词标题右侧有**设置按钮**（齿轮图标）
- 下拉菜单可选择：
  - 播放速度：慢速 / 正常 / 快速
  - 口音：美式英语 / 英式英语 / 澳式英语

**使用示例**：
1. 输入单词 "hello" 并查询
2. 在查询结果中点击麦克风按钮播放发音
3. 点击设置按钮切换到"慢速"或"英式英语"
4. 再次点击麦克风，听到新设置的发音

---

### 2️⃣ 单词库页 (`/words`)

**单词卡片列表**：
- 每个单词卡片标题旁有**隐藏的播放按钮**
- 鼠标悬停时显示
- 点击播放发音（不会触发卡片的详情查看）

**单词详情对话框**：
- 对话框标题栏右侧有**"播放发音"按钮**
- 点击播放当前单词发音

**使用示例**：
1. 浏览单词列表
2. 鼠标悬停在任意单词上，出现麦克风按钮
3. 点击麦克风快速听发音
4. 或点击单词卡片打开详情，在对话框中播放

---

### 3️⃣ 学习计划页 (`/learning`)

**复习卡片**：
- 正面和背面右上角都有**播放按钮**
- 查看单词时可随时播放发音
- 便于跟读和记忆

**待复习列表**：
- 每个单词右侧有**隐藏的播放按钮**
- 鼠标悬停时显示
- 点击快速预习发音

**使用示例**：
1. 点击"开始复习"
2. 看到单词后，点击右上角麦克风听发音
3. 点击"显示答案"后，可再次点击麦克风复习
4. 或在待复习列表中预先听发音

---

## 🎯 快捷键

| 按键 | 功能 | 适用页面 |
|------|------|----------|
| **Space** | 播放当前单词发音 | 快速查询页（查询结果存在时） |

> **注意**：在输入框或文本域中按空格不会触发播放

---

## ⚙️ 发音设置

### 播放速度

| 速度 | 倍率 | 适用场景 |
|------|------|----------|
| **慢速** | 0.7x | 初学者跟读、拼写练习 |
| **正常** | 1.0x | 日常学习、复习 |
| **快速** | 1.3x | 快速浏览、已掌握单词 |

### 口音选择

| 口音 | 代码 | 说明 |
|------|------|------|
| **美式英语** | en-US | 默认，最常用 |
| **英式英语** | en-GB | 英国发音 |
| **澳式英语** | en-AU | 澳大利亚发音 |

> **提示**：不同浏览器和操作系统支持的语音引擎可能不同，发音质量会有差异

---

## 🔧 技术实现

### 核心技术
- **Web Speech API**：浏览器原生语音合成接口
- **SpeechSynthesisUtterance**：语音合成实例
- **localStorage**：设置持久化存储

### 代码架构
```
frontend/src/utils/useSpeech.js  # 通用发音工具函数
├── useSpeech()                   # 组合式函数
│   ├── speak(word, options)      # 播放发音
│   ├── setAccent(accent)         # 设置口音
│   └── setRate(rate)             # 设置速度
└── playWord(word)                # 快捷播放函数
```

### 浏览器兼容性

✅ **完全支持**：
- Chrome/Edge 90+
- Safari 14+
- Firefox 90+

⚠️ **部分支持**：
- 较老版本浏览器可能不支持口音切换
- 某些语音引擎可能不支持速度调节

❌ **不支持**：
- IE 11 及以下

---

## 💡 使用建议

### 学习场景

**1. 初学单词**：
- 使用"慢速"播放
- 多次播放，跟读练习
- 注意音标和实际发音的对应

**2. 复习巩固**：
- 使用"正常"速度
- 结合例句理解发音
- 切换不同口音对比

**3. 快速浏览**：
- 使用"快速"播放
- 快速过一遍待复习单词
- 找出需要重点复习的

### 最佳实践

1. **查询单词后立即播放**：加深第一印象
2. **复习时先听后看**：测试听力和记忆
3. **跟读练习**：播放后立即模仿发音
4. **对比口音**：切换美音/英音，感受差异
5. **调节速度**：根据掌握程度选择合适速度

---

## 🐛 常见问题

### Q1: 点击播放按钮没有声音？
**A**:
- 检查浏览器是否支持 Web Speech API
- 确认系统音量和浏览器音量未静音
- 尝试刷新页面重新加载

### Q2: 发音听起来很机械？
**A**:
- Web Speech API 使用的是系统 TTS 引擎
- 不同操作系统发音质量不同
- Windows/Mac/Linux 的语音引擎各有差异

### Q3: 为什么我的浏览器没有发音按钮？
**A**:
- 系统会自动检测浏览器支持情况
- 不支持的浏览器会隐藏发音功能
- 建议使用 Chrome/Edge/Safari 最新版

### Q4: 切换口音后没有变化？
**A**:
- 部分浏览器可能不支持多口音
- 检查系统是否安装了对应语言包
- Windows: 设置 > 时间和语言 > 语音

### Q5: 空格键快捷播放不生效？
**A**:
- 确保当前焦点不在输入框中
- 只在快速查询页且有查询结果时生效
- 尝试点击页面空白处再按空格

---

## 🚀 后续扩展计划

### 可能的增强功能：

1. **录音对比**：
   - 录制用户发音
   - 与标准发音对比
   - 给出发音评分

2. **发音练习模式**：
   - 听音辨词游戏
   - 跟读打分
   - 发音纠正建议

3. **高级TTS集成**（可选）：
   - 有道TTS API（已有配置）
   - Google Cloud TTS
   - Azure Speech Service

4. **离线发音包**：
   - 下载高质量发音文件
   - 离线使用
   - 减少网络依赖

---

## 📝 更新日志

### v1.0.0 (2025-11-16)
- ✅ 实现基于 Web Speech API 的发音功能
- ✅ 三个页面全面集成发音按钮
- ✅ 支持播放速度和口音切换
- ✅ 添加空格键快捷播放
- ✅ 设置持久化到 localStorage
- ✅ 精美的 UI 交互和动画效果

---

## 📞 反馈与建议

如有任何问题或建议，欢迎反馈！

**祝学习愉快！🎉**
